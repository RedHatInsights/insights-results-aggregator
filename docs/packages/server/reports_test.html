<!DOCTYPE html>
<!--
 Copyright 2020 Red Hat, Inc

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<html>
<head>
<title>reports_test.go</title>
<meta charset="utf-8"/>
<style type="text/css">body {
    background: rgb(225, 225, 225);
    margin: 0px;
    padding: 0px;
}

#docgo p {
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 15px;
    margin-left: 0px;
}

#docgo div {
    display: inline;
}

#docgo #background {
    position: fixed;
    top: 0; left: 525px; right: 0; bottom: 0;
    background: rgb(47, 47, 47);
    border-left: 1px solid #e5e5ee;
    z-index: -1;
}

#docgo .keyword {
    color: rgb(250, 200, 100);
}

#docgo .literal {
    color: rgb(140, 190, 100);
}

#docgo .ident {
    color: white;
}

#docgo .operator {
    color: white;
}

#docgo .comment {
}

#docgo h1, h2, h3, h4, h5 {
    text-align: left;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 15px;
    margin-left: 0px;
}

#docgo h1 {
    margin-top: 40px;
}

#docgo .doc {
    vertical-align: top;
    font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
    font-size: 15px;
    line-height: 22px;
    color: black;
    min-width: 450px;
    max-width: 450px;
    padding-top: 10px;
    padding-right: 25px;
    padding-bottom: 1px;
    padding-left: 50px;
    overflow-x: hidden;
}

#docgo .code {
    min-width: 650px;
    max-width: 650px;
    padding-left: 25px;
    padding-right: 15px;
    border-left: 1px;
    overflow-x: hidden;
    vertical-align: top;
}

#docgo .code pre code  {
    font-size: 12px;
    line-height: 18px;
    font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
    color: rgb(120, 120, 120);
}
</style>
</head>
<body>
<div id="docgo">
  <div id="background"></div>
  <table>
    <thead><tr><th class="doc"><h1>reports_test.go</h1></th><th class="code"></th></tr></thead>
    <tbody>
      
      <tr class="section">
	<td class="doc"><p>Copyright 2020 Red Hat, Inc</p>

<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<pre><code> http://www.apache.org/licenses/LICENSE-2.0
</code></pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</td>
	<td class="code"><pre><code><div class="keyword">package</div> <div class="ident">server_test</div><div class="operator"></div>

<div class="keyword">import</div> <div class="operator">(</div>
	<div class="literal">&#34;net/http&#34;</div><div class="operator"></div>
	<div class="literal">&#34;testing&#34;</div><div class="operator"></div>

	<div class="literal">&#34;github.com/stretchr/testify/assert&#34;</div><div class="operator"></div>

	<div class="literal">&#34;github.com/RedHatInsights/insights-results-aggregator-data/testdata&#34;</div><div class="operator"></div>

	<div class="literal">&#34;github.com/RedHatInsights/insights-results-aggregator/server&#34;</div><div class="operator"></div>
	<div class="literal">&#34;github.com/RedHatInsights/insights-results-aggregator/tests/helpers&#34;</div><div class="operator"></div>
	<div class="literal">&#34;github.com/RedHatInsights/insights-results-aggregator/types&#34;</div><div class="operator"></div>
<div class="operator">)</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestValidateClusterID checks the helper function validateClusterID</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestValidateClusterID</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">err1</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">ValidateClusterID</div><div class="operator">(</div><div class="literal">&#34;&#34;</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">EqualError</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">err1</div><div class="operator">,</div> <div class="literal">&#34;invalid cluster ID: &#39;&#39;. Error: invalid UUID length: 0&#34;</div><div class="operator">)</div><div class="operator"></div>

	<div class="ident">err2</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">ValidateClusterID</div><div class="operator">(</div><div class="literal">&#34;foobar&#34;</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">EqualError</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">err2</div><div class="operator">,</div> <div class="literal">&#34;invalid cluster ID: &#39;foobar&#39;. Error: invalid UUID length: 6&#34;</div><div class="operator">)</div><div class="operator"></div>

	<div class="ident">err3</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">ValidateClusterID</div><div class="operator">(</div><div class="literal">&#34;34c3ecc5-624a-49a5-bab8-4fdc5e51a26Z&#34;</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">EqualError</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">err3</div><div class="operator">,</div> <div class="literal">&#34;invalid cluster ID: &#39;34c3ecc5-624a-49a5-bab8-4fdc5e51a26Z&#39;. Error: invalid UUID format&#34;</div><div class="operator">)</div><div class="operator"></div>

	<div class="ident">err4</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">ValidateClusterID</div><div class="operator">(</div><div class="literal">&#34;34c3ecc5-624a-49a5-bab8-4fdc5e51a266&#34;</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Nil</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">err4</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestConstructClusterNames checks the helper function constructClusterNames</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestConstructClusterNames</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="keyword">const</div> <div class="ident">cn1</div> <div class="operator">=</div> <div class="literal">&#34;cn1&#34;</div><div class="operator"></div>
	<div class="keyword">const</div> <div class="ident">cn2</div> <div class="operator">=</div> <div class="literal">&#34;cn2&#34;</div><div class="operator"></div>

	<div class="ident">cnames0</div> <div class="operator">:=</div> <div class="operator">[</div><div class="operator">]</div><div class="ident">string</div><div class="operator">{</div><div class="operator">}</div><div class="operator"></div>
	<div class="ident">res0</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">ConstructClusterNames</div><div class="operator">(</div><div class="ident">cnames0</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">res0</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">0</div><div class="operator">)</div><div class="operator"></div>

	<div class="ident">cnames1</div> <div class="operator">:=</div> <div class="operator">[</div><div class="operator">]</div><div class="ident">string</div><div class="operator">{</div><div class="ident">cn1</div><div class="operator">}</div><div class="operator"></div>
	<div class="ident">res1</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">ConstructClusterNames</div><div class="operator">(</div><div class="ident">cnames1</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">res1</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">1</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">res1</div><div class="operator">[</div><div class="literal">0</div><div class="operator">]</div><div class="operator">,</div> <div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">(</div><div class="ident">cn1</div><div class="operator">)</div><div class="operator">)</div><div class="operator"></div>

	<div class="ident">cnames2</div> <div class="operator">:=</div> <div class="operator">[</div><div class="operator">]</div><div class="ident">string</div><div class="operator">{</div><div class="ident">cn1</div><div class="operator">,</div> <div class="ident">cn2</div><div class="operator">}</div><div class="operator"></div>
	<div class="ident">res2</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">ConstructClusterNames</div><div class="operator">(</div><div class="ident">cnames2</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">res2</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">2</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">res2</div><div class="operator">[</div><div class="literal">0</div><div class="operator">]</div><div class="operator">,</div> <div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">(</div><div class="ident">cn1</div><div class="operator">)</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">res2</div><div class="operator">[</div><div class="literal">1</div><div class="operator">]</div><div class="operator">,</div> <div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">(</div><div class="ident">cn2</div><div class="operator">)</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestFillInGeneratedReportsEmptySet check the function fillInGeneratedReports</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestFillInGeneratedReportsEmptySet</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">clusterNames</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">ConstructClusterNames</div><div class="operator">(</div><div class="operator">[</div><div class="operator">]</div><div class="ident">string</div><div class="operator">{</div><div class="operator">}</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">reports</div> <div class="operator">:=</div> <div class="ident">make</div><div class="operator">(</div><div class="keyword">map</div><div class="operator">[</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">]</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterReport</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">generatedReport</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">FillInGeneratedReports</div><div class="operator">(</div><div class="ident">clusterNames</div><div class="operator">,</div> <div class="ident">reports</div><div class="operator">)</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>no errors, no clusters, and no reports are expected</p>
</td>
	<td class="code"><pre><code>	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">Errors</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">0</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">ClusterList</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">0</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">Reports</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">0</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestFillInGeneratedReportsNoResults check the function fillInGeneratedReports</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestFillInGeneratedReportsNoResults</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">clusterNames</div> <div class="operator">:=</div> <div class="operator">[</div><div class="operator">]</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">{</div><div class="ident">testdata</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">}</div><div class="operator"></div>
	<div class="ident">reports</div> <div class="operator">:=</div> <div class="ident">make</div><div class="operator">(</div><div class="keyword">map</div><div class="operator">[</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">]</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterReport</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">generatedReport</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">FillInGeneratedReports</div><div class="operator">(</div><div class="ident">clusterNames</div><div class="operator">,</div> <div class="ident">reports</div><div class="operator">)</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>one cluster with error is expected</p>
</td>
	<td class="code"><pre><code>	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">Errors</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">1</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">ClusterList</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">0</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">Reports</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">0</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestFillInGeneratedReportsOneResult check the function fillInGeneratedReports</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestFillInGeneratedReportsOneResult</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">clusterNames</div> <div class="operator">:=</div> <div class="operator">[</div><div class="operator">]</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">{</div><div class="ident">testdata</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">}</div><div class="operator"></div>
	<div class="ident">reports</div> <div class="operator">:=</div> <div class="ident">make</div><div class="operator">(</div><div class="keyword">map</div><div class="operator">[</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">]</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterReport</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">reports</div><div class="operator">[</div><div class="ident">testdata</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">]</div> <div class="operator">=</div> <div class="literal">&#34;{}&#34;</div><div class="operator"></div>
	<div class="ident">generatedReport</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">FillInGeneratedReports</div><div class="operator">(</div><div class="ident">clusterNames</div><div class="operator">,</div> <div class="ident">reports</div><div class="operator">)</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>one cluster without error is expected</p>
</td>
	<td class="code"><pre><code>	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">Errors</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">0</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">ClusterList</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">1</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">Reports</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">1</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestFillInGeneratedReportsImproperJSON check the function fillInGeneratedReports</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestFillInGeneratedReportsImproperJSON</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">clusterNames</div> <div class="operator">:=</div> <div class="operator">[</div><div class="operator">]</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">{</div><div class="ident">testdata</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">}</div><div class="operator"></div>
	<div class="ident">reports</div> <div class="operator">:=</div> <div class="ident">make</div><div class="operator">(</div><div class="keyword">map</div><div class="operator">[</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">]</div><div class="ident">types</div><div class="operator">.</div><div class="ident">ClusterReport</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">reports</div><div class="operator">[</div><div class="ident">testdata</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">]</div> <div class="operator">=</div> <div class="literal">&#34;this{}is{}not{}json&#34;</div><div class="operator"></div>
	<div class="ident">generatedReport</div> <div class="operator">:=</div> <div class="ident">server</div><div class="operator">.</div><div class="ident">FillInGeneratedReports</div><div class="operator">(</div><div class="ident">clusterNames</div><div class="operator">,</div> <div class="ident">reports</div><div class="operator">)</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>one cluster without error is expected</p>
</td>
	<td class="code"><pre><code>	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">Errors</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">1</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">ClusterList</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">0</div><div class="operator">)</div><div class="operator"></div>
	<div class="ident">assert</div><div class="operator">.</div><div class="ident">Equal</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">len</div><div class="operator">(</div><div class="ident">generatedReport</div><div class="operator">.</div><div class="ident">Reports</div><div class="operator">)</div><div class="operator">,</div> <div class="literal">0</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestReadReportsForClustersNegativeOrgID check if wrong organization ID is
handled by ReportForListOfClustersEndpoint handler.</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestReadReportsForClustersNegativeOrgID</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">helpers</div><div class="operator">.</div><div class="ident">AssertAPIRequest</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIRequest</div><div class="operator">{</div>
		<div class="ident">Method</div><div class="operator">:</div>       <div class="ident">http</div><div class="operator">.</div><div class="ident">MethodGet</div><div class="operator">,</div>
		<div class="ident">Endpoint</div><div class="operator">:</div>     <div class="ident">server</div><div class="operator">.</div><div class="ident">ReportForListOfClustersEndpoint</div><div class="operator">,</div>
		<div class="ident">EndpointArgs</div><div class="operator">:</div> <div class="operator">[</div><div class="operator">]</div><div class="keyword">interface</div><div class="operator">{</div><div class="operator">}</div><div class="operator">{</div><div class="operator">-</div><div class="literal">1</div><div class="operator">,</div> <div class="ident">testdata</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">}</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIResponse</div><div class="operator">{</div>
		<div class="ident">StatusCode</div><div class="operator">:</div> <div class="ident">http</div><div class="operator">.</div><div class="ident">StatusBadRequest</div><div class="operator">,</div>
		<div class="ident">Body</div><div class="operator">:</div> <div class="literal">`{
			&#34;status&#34;:&#34;Error during parsing param &#39;org_id&#39; with value &#39;-1&#39;. Error: &#39;unsigned integer expected&#39;&#34;
		}`</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestReadReportsForClustersUnknownCluster check if unknown cluster ID is
handled by ReportForListOfClustersEndpoint handler.</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestReadReportsForClustersUnknownCluster</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">helpers</div><div class="operator">.</div><div class="ident">AssertAPIRequest</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIRequest</div><div class="operator">{</div>
		<div class="ident">Method</div><div class="operator">:</div>       <div class="ident">http</div><div class="operator">.</div><div class="ident">MethodGet</div><div class="operator">,</div>
		<div class="ident">Endpoint</div><div class="operator">:</div>     <div class="ident">server</div><div class="operator">.</div><div class="ident">ReportForListOfClustersEndpoint</div><div class="operator">,</div>
		<div class="ident">EndpointArgs</div><div class="operator">:</div> <div class="operator">[</div><div class="operator">]</div><div class="keyword">interface</div><div class="operator">{</div><div class="operator">}</div><div class="operator">{</div><div class="literal">1</div><div class="operator">,</div> <div class="literal">&#34;not a real cluster&#34;</div><div class="operator">}</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIResponse</div><div class="operator">{</div>
		<div class="ident">StatusCode</div><div class="operator">:</div> <div class="ident">http</div><div class="operator">.</div><div class="ident">StatusBadRequest</div><div class="operator">,</div>
		<div class="ident">Body</div><div class="operator">:</div> <div class="literal">`{
			&#34;status&#34;:&#34;invalid cluster ID: &#39;not a real cluster&#39;. Error: invalid UUID length: 18&#34;
		}`</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestReadReportsForClustersKnownCluster check if unknown cluster ID is
handled by ReportForListOfClustersEndpoint handler.</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestReadReportsForClustersKnownCluster</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">helpers</div><div class="operator">.</div><div class="ident">AssertAPIRequest</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIRequest</div><div class="operator">{</div>
		<div class="ident">Method</div><div class="operator">:</div>       <div class="ident">http</div><div class="operator">.</div><div class="ident">MethodGet</div><div class="operator">,</div>
		<div class="ident">Endpoint</div><div class="operator">:</div>     <div class="ident">server</div><div class="operator">.</div><div class="ident">ReportForListOfClustersEndpoint</div><div class="operator">,</div>
		<div class="ident">EndpointArgs</div><div class="operator">:</div> <div class="operator">[</div><div class="operator">]</div><div class="keyword">interface</div><div class="operator">{</div><div class="operator">}</div><div class="operator">{</div><div class="literal">1</div><div class="operator">,</div> <div class="ident">testdata</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">}</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIResponse</div><div class="operator">{</div>
		<div class="ident">StatusCode</div><div class="operator">:</div> <div class="ident">http</div><div class="operator">.</div><div class="ident">StatusOK</div><div class="operator">,</div>
		<div class="ident">Body</div><div class="operator">:</div> <div class="literal">`{
			&#34;clusters&#34;: null,&#34;errors&#34;: [&#34;84f7eedc-0dd8-49cd-9d4d-f6646df3a5bc&#34;],&#34;reports&#34;: {},&#34;generated_at&#34;: &#34;&#34;,&#34;status&#34;: &#34;OK&#34;
		}`</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestReadReportsForClustersTwoClusters check if unknown cluster ID is
handled by ReportForListOfClustersEndpoint handler.</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestReadReportsForClustersTwoClusters</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">helpers</div><div class="operator">.</div><div class="ident">AssertAPIRequest</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIRequest</div><div class="operator">{</div>
		<div class="ident">Method</div><div class="operator">:</div>       <div class="ident">http</div><div class="operator">.</div><div class="ident">MethodGet</div><div class="operator">,</div>
		<div class="ident">Endpoint</div><div class="operator">:</div>     <div class="ident">server</div><div class="operator">.</div><div class="ident">ReportForListOfClustersEndpoint</div><div class="operator">,</div>
		<div class="ident">EndpointArgs</div><div class="operator">:</div> <div class="operator">[</div><div class="operator">]</div><div class="keyword">interface</div><div class="operator">{</div><div class="operator">}</div><div class="operator">{</div><div class="literal">1</div><div class="operator">,</div> <div class="ident">testdata</div><div class="operator">.</div><div class="ident">ClusterName</div> <div class="operator">&#43;</div> <div class="literal">&#34;,&#34;</div> <div class="operator">&#43;</div> <div class="ident">testdata</div><div class="operator">.</div><div class="ident">ClusterName</div><div class="operator">}</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIResponse</div><div class="operator">{</div>
		<div class="ident">StatusCode</div><div class="operator">:</div> <div class="ident">http</div><div class="operator">.</div><div class="ident">StatusOK</div><div class="operator">,</div>
		<div class="ident">Body</div><div class="operator">:</div> <div class="literal">`{
			&#34;clusters&#34;: null,&#34;errors&#34;: [&#34;84f7eedc-0dd8-49cd-9d4d-f6646df3a5bc&#34;,&#34;84f7eedc-0dd8-49cd-9d4d-f6646df3a5bc&#34;],&#34;reports&#34;: {},&#34;generated_at&#34;: &#34;&#34;,&#34;status&#34;: &#34;OK&#34;
		}`</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestReadReportsForClustersPayloadNegativeOrgID check if wrong organization
ID is handled by ReportForListOfClustersPayloadEndpoint handler.</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestReadReportsForClustersPayloadNegativeOrgID</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">helpers</div><div class="operator">.</div><div class="ident">AssertAPIRequest</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIRequest</div><div class="operator">{</div>
		<div class="ident">Method</div><div class="operator">:</div>       <div class="ident">http</div><div class="operator">.</div><div class="ident">MethodPost</div><div class="operator">,</div>
		<div class="ident">Endpoint</div><div class="operator">:</div>     <div class="ident">server</div><div class="operator">.</div><div class="ident">ReportForListOfClustersPayloadEndpoint</div><div class="operator">,</div>
		<div class="ident">EndpointArgs</div><div class="operator">:</div> <div class="operator">[</div><div class="operator">]</div><div class="keyword">interface</div><div class="operator">{</div><div class="operator">}</div><div class="operator">{</div><div class="operator">-</div><div class="literal">1</div><div class="operator">}</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIResponse</div><div class="operator">{</div>
		<div class="ident">StatusCode</div><div class="operator">:</div> <div class="ident">http</div><div class="operator">.</div><div class="ident">StatusBadRequest</div><div class="operator">,</div>
		<div class="ident">Body</div><div class="operator">:</div> <div class="literal">`{
			&#34;status&#34;:&#34;Error during parsing param &#39;org_id&#39; with value &#39;-1&#39;. Error: &#39;unsigned integer expected&#39;&#34;
		}`</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
      <tr class="section">
	<td class="doc"><p>TestReadReportsForClustersPayloadPositiveOrgID check if wrong organization
ID is handled by ReportForListOfClustersPayloadEndpoint handler.</p>
</td>
	<td class="code"><pre><code><div class="keyword">func</div> <div class="ident">TestReadReportsForClustersPayloadPositiveOrgID</div><div class="operator">(</div><div class="ident">t</div> <div class="operator">*</div><div class="ident">testing</div><div class="operator">.</div><div class="ident">T</div><div class="operator">)</div> <div class="operator">{</div>
	<div class="ident">helpers</div><div class="operator">.</div><div class="ident">AssertAPIRequest</div><div class="operator">(</div><div class="ident">t</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="ident">nil</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIRequest</div><div class="operator">{</div>
		<div class="ident">Method</div><div class="operator">:</div>       <div class="ident">http</div><div class="operator">.</div><div class="ident">MethodPost</div><div class="operator">,</div>
		<div class="ident">Endpoint</div><div class="operator">:</div>     <div class="ident">server</div><div class="operator">.</div><div class="ident">ReportForListOfClustersPayloadEndpoint</div><div class="operator">,</div>
		<div class="ident">EndpointArgs</div><div class="operator">:</div> <div class="operator">[</div><div class="operator">]</div><div class="keyword">interface</div><div class="operator">{</div><div class="operator">}</div><div class="operator">{</div><div class="ident">testdata</div><div class="operator">.</div><div class="ident">OrgID</div><div class="operator">}</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">,</div> <div class="operator">&amp;</div><div class="ident">helpers</div><div class="operator">.</div><div class="ident">APIResponse</div><div class="operator">{</div>
		<div class="ident">StatusCode</div><div class="operator">:</div> <div class="ident">http</div><div class="operator">.</div><div class="ident">StatusBadRequest</div><div class="operator">,</div>
		<div class="ident">Body</div><div class="operator">:</div> <div class="literal">`{
			&#34;status&#34;:&#34;client didn&#39;t provide request body&#34;
		}`</div><div class="operator">,</div>
	<div class="operator">}</div><div class="operator">)</div><div class="operator"></div>
<div class="operator">}</div><div class="operator"></div>

</code></pre></td>
      </tr>
      
    </tbody>
  </table>
</div>
</body>
</html>
